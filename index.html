<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="UTF-8">
  <title>CRTECHâ€‘ROLLA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family:'Segoe UI', sans-serif; background:linear-gradient(to right,#e0f7fa,#fce4ec); margin:0; padding:0; }
    header { background-color:#4a148c; color:white; padding:20px; text-align:center; font-size:28px; }
    .login, .register { background:#fff; margin:30px auto; padding:20px; border-radius:10px; width:90%; max-width:400px; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
    .login input, .register input, .register select, .register textarea { width:100%; padding:12px; margin:8px 0; border:1px solid #aaa; border-radius:5px; }
    .login input[type="button"], .register input[type="button"] { background:#7b1fa2; color:#fff; font-size:16px; cursor:pointer; }
    .services { display:none; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:15px; padding:20px; }
    .service-card { background:#f3e5f5; border-radius:10px; padding:15px; text-align:center; box-shadow:0 2px 6px rgba(0,0,0,0.1); font-size:16px; }
    .service-card img { width:60px; height:60px; margin-bottom:10px; }
    .role-display { text-align:center; font-size:20px; font-weight:bold; color:#4a148c; margin-top:10px; }
    .logout-btn { display:block; margin:10px auto; padding:10px 20px; background:#d32f2f; color:white; border:none; border-radius:5px; cursor:pointer; font-size:16px; }
    footer { background-color:#4a148c; color:white; text-align:center; padding:15px; margin-top:40px; }
    .register, #userListSection { display:none; }
    table { width:90%; margin:20px auto; border-collapse:collapse; }
    th, td { border:1px solid #ccc; padding:10px; text-align:left; }
    th { background-color:#7b1fa2; color:white; }
  </style>
</head>
<body>

  <header>CRTECH - ROLLA</header>

  <div class="login">
    <h2>Login</h2>
    <input type="text" placeholder="Username" id="username"><br>
    <input type="password" placeholder="Password" id="password"><br>
    <input type="button" value="Login" id="loginBtn">
  </div>

  <div class="register" id="registerForm">
    <h2>Create ID</h2>
    <select id="newRole">
      <option value="Retailer">Retailer</option>
      <option value="Distributor">Distributor</option>
    </select>
    <input type="text" placeholder="New Username" id="newUsername"><br>
    <input type="password" placeholder="New Password" id="newPassword"><br>
    <input type="text" placeholder="Name" id="newName"><br>
    <input type="text" placeholder="Mobile Number" id="newMobile"><br>
    <input type="text" placeholder="PAN Number" id="newPan"><br>
    <input type="text" placeholder="Aadhaar Number" id="newAadhaar"><br>
    <textarea placeholder="Address" id="newAddress"></textarea><br>
    <input type="button" value="Create ID" onclick="createAccount()">
  </div>

  <div class="role-display" id="roleDisplay"></div>
  <input type="button" value="Logout" id="logoutBtn" class="logout-btn" style="display:none;">

  <section class="services" id="services">
    <div class="service-card">
      <img src="https://img.icons8.com/external-flat-icons-inmotus-design/100/external-user-personal-data-flat-icons-inmotus-design.png" alt="Retailer">
      <div>Retailer Details</div>
    </div>
    <!-- Add more service cards here if needed -->
  </section>

  <section id="userListSection">
    <h2 style="text-align:center; color:#4a148c;">User Accounts</h2>
    <table id="userTable">
      <thead>
        <tr>
          <th>Role</th><th>Username</th><th>Name</th><th>Mobile</th><th>PAN</th><th>Aadhaar</th><th>Address</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <footer>Â© 2025 CRTECH - ROLLA | Developed with ðŸ’œ in Andhra Pradesh</footer>

  <script>
    let currentUserRole = '';
    let currentUsername = '';

    document.getElementById('loginBtn').addEventListener('click', function () {
      const user = document.getElementById('username').value.trim();
      const pass = document.getElementById('password').value.trim();
      if (user === 'CRTECH' && pass === 'CRTECH') {
        currentUserRole = 'Super Distributor';
        currentUsername = 'CRTECH';
        showServices();
        document.getElementById('registerForm').style.display = 'block';
        displayUserList();
        return;
      }
      const users = JSON.parse(localStorage.getItem('userAccounts') || '[]');
      const match = users.find(u => u.username === user && u.password === pass);
      if (match) {
        currentUserRole = match.role;
        currentUsername = match.username;
        showServices();
        if (currentUserRole === 'Distributor') {
          document.getElementById('registerForm').style.display = 'block';
        }
        displayUserList();
      } else {
        alert('Invalid credentials.');
      }
    });

    function createAccount() {
      const role = document.getElementById('newRole').value;
      const username = document.getElementById('newUsername').value.trim();
      const password = document.getElementById('newPassword').value.trim();
      const name = document.getElementById('newName').value.trim();
      const mobile = document.getElementById('newMobile').value.trim();
      const pan = document.getElementById('newPan').value.trim();
      const aadhaar = document.getElementById('newAadhaar').value.trim();
      const address = document.getElementById('newAddress').value.trim();

      if (!username || !password || !name || !mobile || !pan || !aadhaar || !address) {
        alert('Please fill all fields'); return;
      }

      const users = JSON.parse(localStorage.getItem('userAccounts') || '[]');
      if (users.find(u => u.username === username)) {
        alert('Username already exists'); return;
      }

      if (currentUserRole === 'Distributor' && role !== 'Retailer') {
        alert('Distributor can only create Retailer accounts.'); return;
      }

      users.push({ role, username, password, name, mobile, pan, aadhaar, address, createdBy: currentUsername });
      localStorage.setItem('userAccounts', JSON.stringify(users));
      alert('Account created successfully!');
      displayUserList();
    }

    function showServices() {
      document.querySelector('.login').style.display = 'none';
      document.getElementById('services').style.display = 'grid';
      document.getElementById('logoutBtn').style.display = 'block';
      document.getElementById('roleDisplay').textContent = 'Logged in as: ' + currentUserRole;
    }

    function displayUserList() {
      const users = JSON.parse(localStorage.getItem('userAccounts') || '[]');
      const tbody = document.querySelector('#userTable tbody');
      tbody.innerHTML = '';

      const visibleUsers = (currentUserRole === 'Super Distributor') ? users :
        users.filter(u => u.createdBy === currentUsername);

      visibleUsers.forEach(u => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${u.role}</td><td>${u.username}</td><td>${u.name}</td><td>${u.mobile}</td><td>${u.pan}</td><td>${u.aadhaar}</td><td>${u.address}</td>`;
        tbody.appendChild(tr);
      });

      document.getElementById('userListSection').style.display = 'block';
    }

    document.getElementById('logoutBtn').addEventListener('click', function () {
      location.reload();
    });
  </script>

</body>
</html>
